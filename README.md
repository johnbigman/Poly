# Poly# Poly 프로젝트

### 프로젝트 개요
- **목표**: Unity를 사용하여 복셀 기반 샌드박스 게임 제작.
- **언어**: C#
- **모델링 도구**: Blockbench

### 사용 기술
1. **Unity**:
   - 게임 엔진으로 사용.
   - 복셀 그리드 및 게임 메커니즘 구현.
2. **C#**:
   - Unity 스크립팅 언어로 프로젝트 로직 작성.
3. **Blockbench**:
   - 블록 모델과 애니메이션 생성.
   - 텍스처 제작 및 복셀 기반 아트 작업.

### 계획
- [ ] Unity 프로젝트 초기화 및 디렉토리 구조 생성
- [ ] 복셀 엔진 핵심 시스템 개발
- [ ] Blockbench를 활용한 커스텀 블록 및 모델 제작
- [ ] 기본 게임 플레이 메커니즘 구현 (예: 플레이어 이동, 블록 배치 등)
### **폴리몬스터: 최종 기획 문서**  

---

## **1. 게임 개요와 방향성**  
**폴리몬스터**는 **마인크래프트 픽셀몬 모드**와 **굶지마**의 요소를 결합한 **3D 생존 수집형 샌드박스 게임**입니다.  
- **탐험과 생존**: 자원을 채집하고 몬스터를 포획하며, 거점을 만들어 성장.  
- **턴제 전투와 전략적 플레이**: 몬스터 속성 및 약점을 활용한 전략적 전투.  
- **지상과 지하 탐험**:  
  - **지상**: 농사, 건축, 몬스터 포획.  
  - **지하**: 난이도가 증가하는 로그라이크 스타일 탐험.  

---

## **2. 게임 시스템 개요**  

### **2.1 블록 기반 월드**  
- **Voxel System**: 모든 지형은 16x16x16 크기의 청크로 구성된 블록 환경.  
- **블록 종류**: 흙, 돌, 나무, 희귀 자원 블록.  
- **지형 파괴 및 설치**: 플레이어가 블록을 파괴하거나 설치 가능.  

### **2.2 몬스터 시스템**  
- **속성 분류**: 물리(참격, 타격) 및 원소(불, 물, 번개 등).  
- **몬스터 유형**: 선공형, 중립형, 비선공형.  
- **몬스터 개화와 변이**: 몬스터가 레벨에 따라 개화(진화), 특정 아이템 사용 시 변이.  

### **2.3 생존 요소**  
- **배고픔과 갈증**: 일정 수준 이하로 떨어지면 체력 감소.  
- **회복 아이템**: 자원을 통해 요리하거나 약초를 사용.  
- **날씨 시스템**: 날씨에 따라 이동 속도, 자원 채집 효율 등이 변화.  

### **2.4 전투와 포획**  
- **자동 전투 시스템**: 몬스터 간 자동 전투.  
- **포획 메커니즘**:  
  1. 덫 설치 → 몬스터 스턴.  
  2. 전투에서 승리 → 포획 성공.  

### **2.5 탐험 시스템**  
- **탐험 도구**: 글라이더, 훅 등으로 이동 지원.  
- **지하 탐험**: 깊이와 층수에 따라 자원 및 몬스터 난이도 증가.  

---

## **3. 핵심 기획 요소**  

### **3.1 지형 시스템**  
- **청크 로드 시스템**: 플레이어 위치 기반으로 주변 청크만 로드.  
- **블록 렌더링 최적화**: 프러스텀 컬링과 오클루전 컬링 적용.  

### **3.2 몬스터 시스템**  
- **속성 상성**:  
  - 약점 속성 공격 시 데미지 2배.  
  - 강점 속성 공격 시 데미지 0.5배.  
- **몬스터 알 부화**: 희귀 몬스터는 알로 획득하여 부화 가능.  

### **3.3 아이템 시스템**  
- **아이템 분류**: 블록, 소모 아이템, 장착 아이템, 소재 아이템, 몬스터 알.  
- **아이템 관리**: 고유 키를 사용해 데이터베이스에서 효율적으로 관리.  

### **3.4 전투 시스템**  
- **턴제 전투**: 속도에 따라 행동 순서 결정.  
- **강공격 게이지**: 턴 경과에 따라 충전, 강공격 사용 가능.  

### **3.5 던전과 보스**  
- **랜덤 생성 던전**: 각 층은 다른 환경과 몬스터 배치.  
- **보스전**: 특정 층에서 강력한 보스 등장, 특별 보상 제공.  

---

## **4. UI 및 UX 설계**  
- **미니맵**: 탐험 시 현재 위치와 주변 지형 표시.  
- **퀘스트 UI**: 진행 중인 퀘스트와 보상 표시.  
- **인벤토리 UI**: 소지 아이템, 장비, 몬스터 상태 확인.  
- **몬스터 도감**: 포획한 몬스터 정보 열람.  

---

## **5. 경제 시스템**  
- **시장 가격 변동**: 자원 공급과 수요에 따라 변화.  
- **투자 시스템**: 특정 자원의 생산성을 증가시키는 투자 가능.  

---

## **6. 저장 및 로드**  
- **자동 저장**: 청크 및 플레이어 상태를 일정 시간마다 자동 저장.  
- **데이터 복구 시스템**: 예기치 못한 데이터 손실을 대비한 백업 시스템.  

---

## **7. 최적화 전략**  
- **데이터 압축**: 복셀 데이터의 메모리 최적화.  
- **멀티스레드**: 청크 로드 및 렌더링을 비동기 처리.  
- **렌더링 최적화**: 가려진 블록 및 청크 렌더링 제외.  

---

### **폴리몬스터**의 구조적 설계는 기획 단계에서 구체화되어, 시스템 간의 상호작용과 코드 최적화를 바탕으로 원활한 게임플레이 경험을 목표로 합니다.

복셀 시스템과 청크 로드 시스템

1. 복셀 시스템 개요

**복셀(Voxel)**은 3D 공간을 표현하는 최소 단위인 "3D 픽셀"입니다. 폴리몬스터에서의 복셀 시스템은 블록 기반 월드를 구성하며, 지형 생성, 수정, 렌더링을 담당합니다.

복셀 데이터 구조

복셀은 16x16x16 크기의 청크로 나뉘며, 각 청크는 블록 데이터를 저장합니다.

각 블록은 다음 데이터를 포함:

BlockType: 블록의 종류 (흙, 돌, 나무 등).

Position: 블록의 월드 좌표.

IsVisible: 렌더링 여부.

복셀 렌더링 최적화

프러스텀 컬링: 카메라 시야 밖의 청크는 렌더링하지 않음.

오클루전 컬링: 가려진 블록은 렌더링하지 않음.

2. 청크 로드 시스템

청크 로드 시스템은 플레이어 위치를 기준으로 주변 청크를 동적으로 로드하고 언로드하여 메모리와 성능을 최적화합니다.

청크 구조

각 청크는 16x16x16 블록으로 구성.

청크는 고유 좌표 (Vector3Int)를 기반으로 관리.

로드/언로드 기준

플레이어를 중심으로 3x3x3 청크 범위를 로드.

플레이어가 이동하면 기존 청크를 언로드하고 새로운 청크를 로드.

3. 청크 데이터 관리

ChunkData 클래스

각 청크의 블록 정보를 저장.

파일로 저장하여 게임 종료 후에도 복원 가능  

### **폴리몬스터: 전투 시스템 기획**

---

## 1. **전투의 기본 구조**

전투는 **턴제 방식**으로 진행되며, 플레이어의 몬스터와 야생 몬스터가 교대로 행동합니다.  
- **행동 선택**: 플레이어는 몬스터의 기본 기술(일반 공격) 또는 특수 기술을 사용할 수 있습니다.  
- **속도 기반 턴 결정**: 몬스터의 속도 수치에 따라 턴 순서가 결정됩니다.  

---

## 2. **행동 종류**

### 1. **기본 기술 (일반 공격)**  
- 모든 몬스터는 하나의 **기본 기술**을 보유.  
- 특수 기술과 비교해 **쿨타임이 없고 자주 사용 가능**.  
- 속성과 물리 유형이 다양하며, 약점 공격 시 추가 데미지.  

### 2. **특수 기술**  
- **강공격**으로, 일정 조건 충족 시 사용 가능.  
- **게이지 충전**: 기본 기술을 사용할 때마다 게이지가 충전되며, 게이지가 가득 차면 발동 가능.  
- 효과:  
  - 강력한 데미지.  
  - 상태이상 유발.  
  - 속성 강화 공격.  

### 3. **방어**  
- 턴을 소모하여 방어 자세를 취함.  
- **받는 피해 감소** 및 **상태이상 회복 확률 증가**.  

### 4. **교체**  
- 현재 몬스터를 교체하여 **후방 몬스터**를 전투에 투입.  
- 교체된 몬스터는 해당 턴 행동 불가.  

---

## 3. **속성과 상성**

전투의 핵심은 **속성 상성**입니다.  
- 속성 상성에 따라 데미지가 증가하거나 감소.  
- 물리 속성과 원소 속성이 동시에 적용 가능.  

### **속성 상성 배율**  
- **상성 약점**: 2.0배  
- **상성 강점**: 0.5배  
- **상성 없음**: 1.0배  

---

## 4. **상태이상**

### 1. **마비**  
- 일정 확률로 행동 불가.  
- 지속 시간: 3턴.  

### 2. **화상**  
- 매 턴 체력 지속 감소.  
- 공격력 감소 효과 포함.  
- 지속 시간: 5턴.  

### 3. **수면**  
- 일정 턴 동안 행동 불가.  
- 물리 공격을 받으면 즉시 해제.  
- 지속 시간: 2~4턴.  

---

## 5. **전투의 흐름**

1. **시작**:  
   - 야생 몬스터와 마주치면 전투 시작.  
   - 선공권은 몬스터 속도에 따라 결정.  

2. **행동 선택**:  
   - 플레이어는 기본 기술, 특수 기술, 방어, 교체 중 하나를 선택.  

3. **턴 진행**:  
   - 행동 순서에 따라 몬스터가 행동.  
   - 데미지 계산, 상태이상 적용 등 처리.  

4. **승리 조건**:  
   - 상대 몬스터의 체력을 0으로 만들면 승리.  
   - 포획 가능 상태로 전환.  

5. **패배 조건**:  
   - 플레이어의 모든 몬스터가 기절하면 패배.  

---

## 6. **자동 전투**  

플레이어는 필드에서 **몬스터를 자동으로 소환**하여 전투를 진행할 수 있습니다.  
- **특징**:  
  - 자동 전투에서는 몬스터가 플레이어의 명령 없이 행동.  
  - 포획 불가.  
  - **기절 위험**: 강력한 몬스터와 싸우다가 플레이어 몬스터가 기절할 수 있음.  

---

## 7. **전투 보상**  

전투 종료 후 보상이 지급됩니다.  
- **일반 보상**: 경험치, 자원, 몬스터 소재.  
- **특수 보상**: 퀘스트 수행 시 희귀 아이템, 포획 가능한 몬스터.  

---

## 8. **예시 전투 흐름**

1. **플레이어 몬스터**: 불 속성 몬스터(기본 기술: 화염 던지기, 특수 기술: 화염 폭발).  
2. **야생 몬스터**: 얼음 속성 몬스터.  

**전투 시작**  
- 선공: 플레이어 몬스터  
- 1턴: 플레이어 몬스터가 화염 던지기 사용 → 야생 몬스터에게 2배 데미지.  
- 2턴: 야생 몬스터가 얼음 공격 사용 → 플레이어 몬스터에게 0.5배 데미지.  
- 3턴: 화염 폭발로 마무리 → 승리.  

---

## 9. **기타 전투 설정**

- **속도 보너스**: 플레이어 몬스터의 속도가 30% 이상 빠르면 추가 행동 기회 제공.  
- **치유 기술 제한**: 전투당 1회 사용.  

---

/Scripts   
  ├── /Core  
  │   ├── CoreManager.cs          // 전체 시스템 관리  
  │   ├── EventSystem.cs          // 시스템 간 이벤트 전달  
  │   ├── GameSettings.cs         // 게임 전역 설정 및 관리  

  ├── /World  
  │   ├── WorldManager.cs         // 월드 및 청크 관리  
  │   ├── TerrainGenerator.cs     // 지형 생성 및 데이터 관리  
  │   ├── ChunkHandler.cs         // 청크 로드 및 언로드  
  │   ├── ChunkData.cs            // 청크 데이터 저장  
  │   ├── BlockManager.cs         // 블록 데이터 관리 및 최적화  
  │   ├── ObjectSpawner.cs        // 나무, 광맥 등의 동적 오브젝트 스폰  

  ├── /Player  
  │   ├── PlayerManager.cs        // 플레이어 입력 및 상태 관리  
  │   ├── InventoryManager.cs     // 인벤토리 관리  
  │   ├── EquipmentManager.cs     // 장비 및 스탯 관리  
  │   ├── QuestTracker.cs         // 퀘스트 진행 상황 관리  

  ├── /Monster  
  │   ├── MonsterManager.cs       // 몬스터 데이터 및 상태 관리  
  │   ├── MonsterAI.cs            // 몬스터 행동 패턴 및 전투 로직  
  │   ├── EggHatchingSystem.cs    // 몬스터 알 부화 시스템  
  │   ├── BattleSystem.cs         // 몬스터 전투 로직  
  │   ├── SkillManager.cs         // 몬스터 기술 관리  

  ├── /Items  
  │   ├── ItemDatabase.cs         // 아이템 데이터베이스  
  │   ├── ItemManager.cs          // 아이템 생성 및 사용 로직  
  │   ├── ItemData.cs             // 아이템 속성 정의  
  │   ├── ConsumableEffect.cs     // 소모 아이템 효과 적용  

  ├── /UI  
  │   ├── UIManager.cs            // UI 관리  
  │   ├── QuestUI.cs              // 퀘스트 UI  
  │   ├── InventoryUI.cs          // 인벤토리 UI  
  │   ├── MonsterCodexUI.cs       // 몬스터 도감 UI  

  ├── /SaveLoad  
  │   ├── SaveManager.cs          // 게임 저장 및 로드  
  │   ├── BackupSystem.cs         // 데이터 백업 및 복구  

  ├── /Utilities  
  │   ├── Logger.cs               // 로그 관리  
  │   ├── LODManager.cs           // Level of Detail 시스템  
  │   ├── FrustumCulling.cs       // 프러스텀 컬링  
  │   ├── OcclusionCulling.cs     // 오클루전 컬링  
  │   ├── DataCompression.cs      // 데이터 압축 및 최적화  

  └── /Tests  
      ├── UnitTests.cs            // 단위 테스트 스크립트  
      ├── IntegrationTests.cs     // 통합 테스트 스크립트  
